<div id="fileupload">
	<!-- Redirect browsers with JavaScript disabled to the origin page -->
	<noscript><input type="hidden" name="redirect" value="<%= main_app.root_path %>"></noscript>
	<!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
	<div class="row fileupload-buttonbar">
		<div class="col-xs-7">
			<!-- The fileinput-button span is used to style the file input field as button -->
                <span class="btn btn-success fileinput-button">
                    <span class="glyphicon glyphicon-plus"></span>
                    <span>Add files...</span>
                    <input type="file" name="files[]" multiple>
                </span>
			<% if browser_supports_directory_upload? %>
				<!-- The fileinput-button span is used to style the file input field as button -->
                <span class="btn btn-success fileinput-button">
                    <span class="glyphicon glyphicon-plus"></span>
                    <span>Add folder...</span>
                    <input type="file" name="files[]" multiple directory webkitdirectory>
                </span>
			<% end %>
			<button type="reset" class="btn btn-warning cancel hidden">
				<span class="glyphicon glyphicon-ban-circle"></span>
				<span>Cancel upload</span>
			</button>
			<!-- The global file processing state -->
			<span class="fileupload-process"></span>
		</div>
		<!-- The global progress state -->
		<div class="col-xs-5 fileupload-progress fade">
			<!-- The global progress bar -->
			<div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
				<div class="progress-bar progress-bar-success" style="width:0%;"></div>
			</div>
			<!-- The extended global progress state -->
			<div class="progress-extended">&nbsp;</div>
		</div>
	</div>
	<!-- The table listing the files available for upload/download -->
	<table role="presentation" class="table table-striped"><tbody class="files"></tbody></table>
	<% if defined?(f.object.file_sets) && f.object.file_sets.present? %>
		<fieldset id="uploaded-files">
			<legend>Previously Uploaded Files</legend>
			<table role="presentation" class="table table-striped uploaded-files">
				<tbody>
				<% f.object.file_sets.each do |file| %>
					<tr>
						<td><span class="preview"></span></td>
						<td>
							<span class="file-name"><%= file.solr_document.label %></span><br>
							<span class="file-label">Display Label:</span><input type="text" class="string optional form-control" name="previously_uploaded_files_label[]" value="<%= display_array(file.title) %>" />
						</td>
						<td>
						</td>
						<td>
							<button class="btn btn-danger delete" data-type="DELETE" data-url="TODO/uploads/12">
							<i class="glyphicon glyphicon-trash"></i>
							<span>Delete</span>
						</button>
						</td>
					</tr>
				<% end %>
				</tbody>
			</table>
		</fieldset>
	<% end %>
</div>

<%= render 'sufia/uploads/js_templates' %>
<%= render 'browse_everything', f: f if Sufia.config.browse_everything %>
